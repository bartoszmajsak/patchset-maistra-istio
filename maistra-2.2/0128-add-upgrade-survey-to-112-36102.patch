From 016bc46f4a5e0ef3fa135b3c5380ab7765467c1a Mon Sep 17 00:00:00 2001
From: Mitch Connors <mitchconnors@gmail.com>
Date: Tue, 16 Nov 2021 11:05:27 -0800
Subject: add upgrade survey to 112 (#36102)

* add upgrade survey to 112

Change-Id: I5ca1c5cea3e685f5cc51263ce53349dfb2595f73

* remove reference to 1.11

Change-Id: I2c2f04c011ea6013c5ec4e6e99c1789f31b6f581

* gen

Change-Id: Iacfcac714273d245b1bb23640c07c5490946bc7a
---
 .../charts/istio-control/istio-discovery/templates/NOTES.txt | 2 ++
 operator/cmd/mesh/install.go                                 | 5 +++++
 2 files changed, 7 insertions(+)

diff --git a/manifests/charts/istio-control/istio-discovery/templates/NOTES.txt b/manifests/charts/istio-control/istio-discovery/templates/NOTES.txt
index 5b5b2b3e80..f369b56dac 100644
--- a/manifests/charts/istio-control/istio-discovery/templates/NOTES.txt
+++ b/manifests/charts/istio-control/istio-discovery/templates/NOTES.txt
@@ -17,3 +17,5 @@ Next steps:
     * https://istio.io/latest/docs/ops/best-practices/security/
 
 For further documentation see https://istio.io website
+
+Tell us how your install/upgrade experience went at https://forms.gle/FegQbc9UvePd4Z9z7
diff --git a/operator/cmd/mesh/install.go b/operator/cmd/mesh/install.go
index 85055790c0..9fd0ca0b50 100644
--- a/operator/cmd/mesh/install.go
+++ b/operator/cmd/mesh/install.go
@@ -227,6 +227,11 @@ func runApplyCmd(cmd *cobra.Command, rootArgs *rootArgs, iArgs *installArgs, log
 		}
 	}
 
+	if !rootArgs.dryRun {
+		_, _ = fmt.Fprintln(cmd.OutOrStderr(), "\nThank you for installing Istio 1.12.  Please take a few minutes to "+
+			"tell us about your install/upgrade experience!  https://forms.gle/FegQbc9UvePd4Z9z7")
+	}
+
 	return nil
 }
 
-- 
2.35.3

