From 4f36a7a5de525174a6ba32ef7dac006ae81e0828 Mon Sep 17 00:00:00 2001
From: Daniel Grimm <dgrimm@redhat.com>
Date: Thu, 28 Oct 2021 22:25:02 +0200
Subject: [release-1.12] Automated branching step 4 (#35783)

---
 CODEOWNERS                | 64 +--------------------------------------
 common/Makefile.common.mk |  2 +-
 prow/release-commit.sh    |  4 +--
 3 files changed, 4 insertions(+), 66 deletions(-)

diff --git a/CODEOWNERS b/CODEOWNERS
index a116838a0e..1f4ab2a385 100644
--- a/CODEOWNERS
+++ b/CODEOWNERS
@@ -1,63 +1 @@
-*                                                                @costinm @linsun @howardjohn @nmittler
-/.gitattributes                                                  @istio/wg-test-and-release-maintainers
-/.gitignore                                                      @istio/wg-test-and-release-maintainers
-/Makefile.core.mk                                                @istio/wg-test-and-release-maintainers
-/bin/                                                            @istio/wg-test-and-release-maintainers
-/cmd/istiod/                                                     @istio/wg-environments-maintainers
-/cni/                                                            @istio/wg-networking-maintainers
-/common/                                                         @istio/wg-test-and-release-maintainers
-/common-protos/                                                  @istio/wg-test-and-release-maintainers
-/galley/                                                         @istio/wg-networking-maintainers
-/galley/pkg/config/analysis/                                     @istio/wg-user-experience-maintainers
-/install/                                                        @istio/wg-environments-maintainers
-/istioctl/                                                       @istio/wg-user-experience-maintainers
-Makefile*                                                        @istio/wg-test-and-release-maintainers
-/manifests/                                                      @istio/wg-environments-maintainers
-/operator/                                                       @istio/wg-environments-maintainers
-/pilot/                                                          @istio/wg-networking-maintainers
-/pilot/pkg/security/                                             @istio/wg-security-maintainers
-/pilot/pkg/config/                                               @istio/wg-networking-maintainers
-/pilot/pkg/networking/plugin/authn/                              @istio/wg-security-maintainers
-/pilot/pkg/networking/plugin/authz/                              @istio/wg-security-maintainers
-/pilot/pkg/serviceregistry/                                      @istio/wg-networking-maintainers-pilot
-/pilot/pkg/model/                                                @istio/wg-networking-maintainers-pilot
-/pilot/pkg/networking/core                                       @istio/wg-networking-maintainers-pilot
-/pilot/pkg/proxy                                                 @istio/wg-networking-maintainers-pilot
-/pkg/adsc/                                                       @istio/wg-networking-maintainers
-/pkg/bootstrap/                                                  @istio/wg-networking-maintainers
-/pkg/config/                                                     @istio/wg-networking-maintainers
-/pkg/dns/                                                        @istio/wg-networking-maintainers
-/pkg/envoy/                                                      @istio/wg-networking-maintainers
-/pkg/istio-agent/                                                @istio/wg-networking-maintainers @istio/wg-security-maintainers
-/pkg/keepalive/                                                  @istio/wg-networking-maintainers
-/pkg/kube/                                                       @istio/wg-networking-maintainers
-/pkg/mcp/                                                        @istio/wg-networking-maintainers
-/pkg/queue/                                                      @istio/wg-networking-maintainers
-/pkg/security/                                                   @istio/wg-security-maintainers @istio/wg-environments-maintainers
-/pkg/spiffe/                                                     @istio/wg-security-maintainers
-/pkg/test/                                                       @istio/wg-test-and-release-maintainers
-/pkg/tracing/                                                    @istio/wg-policies-and-telemetry-maintainers
-/pkg/wasm/                                                       @istio/wg-policies-and-telemetry-maintainers
-/pkg/webhooks/                                                   @istio/wg-environments-maintainers
-/prow/                                                           @istio/wg-test-and-release-maintainers
-/release/                                                        @istio/wg-test-and-release-maintainers
-/releasenotes/                                                   @istio/wg-test-and-release-maintainers @istio/release-managers
-/samples/                                                        @istio/wg-docs-maintainers
-/samples/addons                                                  @istio/wg-policies-and-telemetry-maintainers @istio/wg-environments-maintainers
-/samples/multicluster                                            @istio/wg-networking-maintainers
-/security/                                                       @istio/wg-security-maintainers
-/tests/                                                          @istio/wg-test-and-release-maintainers
-/tests/integration/conformance/                                  @istio/wg-test-and-release-maintainers
-/tests/integration/framework/                                    @istio/wg-test-and-release-maintainers
-/tests/integration/galley/                                       @istio/wg-networking-maintainers
-/tests/integration/telemetry/                                    @istio/wg-policies-and-telemetry-maintainers
-/tests/integration/pilot/                                        @istio/wg-networking-maintainers
-/tests/integration/qualification/                                @istio/wg-test-and-release-maintainers
-/tests/integration/security/                                     @istio/wg-security-maintainers
-/tests/integration/istioctl/                                     @istio/wg-user-experience-maintainers
-/tools/                                                          @istio/wg-test-and-release-maintainers
-/tools/packaging/common/envoy_bootstrap.json                  @istio/wg-networking-maintainers
-/tools/istio-iptables/                                           @istio/wg-networking-maintainers
-/tools/istio-clean-iptables/                                     @istio/wg-networking-maintainers
-manifests/charts/global.yaml                                     @costinm @jacob-delgado @Monkeyanator
-**/values.yaml                                                   @costinm @jacob-delgado @Monkeyanator
+* @istio/release-managers-1-12
diff --git a/common/Makefile.common.mk b/common/Makefile.common.mk
index 4e02d7abb4..8747ba0d58 100644
--- a/common/Makefile.common.mk
+++ b/common/Makefile.common.mk
@@ -97,7 +97,7 @@ mirror-licenses: mod-download-go
 	@license-lint --mirror
 
 TMP := $(shell mktemp -d -u)
-UPDATE_BRANCH ?= "master"
+UPDATE_BRANCH ?= "release-1.12"
 
 update-common:
 	@mkdir -p $(TMP)
diff --git a/prow/release-commit.sh b/prow/release-commit.sh
index c1401534c0..2568d52117 100755
--- a/prow/release-commit.sh
+++ b/prow/release-commit.sh
@@ -100,6 +100,6 @@ release-builder validate --release "${WORK_DIR}/out"
 
 if [[ -z "${DRY_RUN:-}" ]]; then
   release-builder publish --release "${WORK_DIR}/out" \
-    --gcsbucket "${GCS_BUCKET}" --gcsaliases "${NEXT_VERSION}-dev,latest" \
-    --dockerhub "${DOCKER_HUB}" --dockertags "${VERSION},${NEXT_VERSION}-dev,latest"
+    --gcsbucket "${GCS_BUCKET}" --gcsaliases "${NEXT_VERSION}-dev" \
+    --dockerhub "${DOCKER_HUB}" --dockertags "${VERSION},${NEXT_VERSION}-dev"
 fi
-- 
2.35.3

