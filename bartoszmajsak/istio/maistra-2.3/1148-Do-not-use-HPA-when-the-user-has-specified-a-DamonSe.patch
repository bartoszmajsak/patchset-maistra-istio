From 01ceb4c6626e5531b310025c7843402c1fcfb739 Mon Sep 17 00:00:00 2001
From: jacob-delgado <jacob.delgado@volunteers.acasi.info>
Date: Thu, 28 Apr 2022 12:55:33 -0600
Subject: Do not use HPA when the user has specified a DamonSet for a gateway
 (#38651)

---
 manifests/charts/gateway/templates/hpa.yaml | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/manifests/charts/gateway/templates/hpa.yaml b/manifests/charts/gateway/templates/hpa.yaml
index ef350168d5..57a8bfe71e 100644
--- a/manifests/charts/gateway/templates/hpa.yaml
+++ b/manifests/charts/gateway/templates/hpa.yaml
@@ -1,4 +1,4 @@
-{{- if .Values.autoscaling.enabled }}
+{{- if and (.Values.autoscaling.enabled) (eq .Values.kind "Deployment") }}
 apiVersion: autoscaling/v2beta2
 kind: HorizontalPodAutoscaler
 metadata:
@@ -24,5 +24,4 @@ spec:
           averageUtilization: {{ .Values.autoscaling.targetCPUUtilizationPercentage }}
           type: Utilization
     {{- end }}
-
 {{- end }}
-- 
2.35.3

