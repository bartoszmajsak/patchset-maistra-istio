From 5c3beaf9de7573d7bc67bc378fa196f8be17bc84 Mon Sep 17 00:00:00 2001
From: Iris <irisdingbj@gmail.com>
Date: Mon, 13 Dec 2021 09:45:18 +0800
Subject: no need to append rootcertBytes if it is empty (#36464)

---
 security/pkg/server/ca/server.go | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/security/pkg/server/ca/server.go b/security/pkg/server/ca/server.go
index 5a5ce66cbe..c1509ccafa 100644
--- a/security/pkg/server/ca/server.go
+++ b/security/pkg/server/ca/server.go
@@ -106,7 +106,9 @@ func (s *Server) CreateCertificate(ctx context.Context, request *pb.IstioCertifi
 			respCertChain = append(respCertChain, string(certChainBytes))
 		}
 	}
-	respCertChain = append(respCertChain, string(rootCertBytes))
+	if len(rootCertBytes) != 0 {
+		respCertChain = append(respCertChain, string(rootCertBytes))
+	}
 	response := &pb.IstioCertificateResponse{
 		CertChain: respCertChain,
 	}
-- 
2.35.3

