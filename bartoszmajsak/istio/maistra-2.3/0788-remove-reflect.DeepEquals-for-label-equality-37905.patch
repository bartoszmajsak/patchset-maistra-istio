From 72a461bc252414ca0ccc1dc2335d760bdbf68062 Mon Sep 17 00:00:00 2001
From: Rama Chavali <rama.rao@salesforce.com>
Date: Mon, 14 Mar 2022 21:32:54 +0530
Subject: remove reflect.DeepEquals for label equality (#37905)

Signed-off-by: Rama Chavali <rama.rao@salesforce.com>
---
 pilot/pkg/serviceregistry/serviceentry/servicediscovery.go | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/pilot/pkg/serviceregistry/serviceentry/servicediscovery.go b/pilot/pkg/serviceregistry/serviceentry/servicediscovery.go
index 0e0b6c9fc8..16acf1f9cd 100644
--- a/pilot/pkg/serviceregistry/serviceentry/servicediscovery.go
+++ b/pilot/pkg/serviceregistry/serviceentry/servicediscovery.go
@@ -208,7 +208,7 @@ func (s *ServiceEntryStore) workloadEntryHandler(old, curr config.Config, event
 	currSes := getWorkloadServiceEntries(cfgs, wle)
 	var oldSes map[types.NamespacedName]*config.Config
 	if oldWle != nil {
-		if reflect.DeepEqual(oldWle.Labels, wle.Labels) {
+		if labels.Instance(oldWle.Labels).Equals(wle.Labels) {
 			oldSes = currSes
 		} else {
 			oldSes = getWorkloadServiceEntries(cfgs, oldWle)
-- 
2.35.3

