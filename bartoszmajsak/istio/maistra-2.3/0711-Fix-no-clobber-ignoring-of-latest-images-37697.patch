From 0f77aed3bd20d313bf669b94016de7fd2eb86710 Mon Sep 17 00:00:00 2001
From: Eric Van Norman <ericvn@us.ibm.com>
Date: Thu, 3 Mar 2022 18:25:12 -0700
Subject: Fix --no-clobber ignoring of `latest` images (#37697)

---
 tools/docker-builder/main.go | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/tools/docker-builder/main.go b/tools/docker-builder/main.go
index f0eab8e053..fc019d866c 100644
--- a/tools/docker-builder/main.go
+++ b/tools/docker-builder/main.go
@@ -335,7 +335,7 @@ func ConstructBakeFile(a Args) (map[string]string, error) {
 	if args.NoClobber {
 		e := errgroup.Group{}
 		for _, i := range allDestinations.SortedList() {
-			if i == "latest" { // Allow clobbering of latest - don't verify existence
+			if strings.HasSuffix(i, ":latest") { // Allow clobbering of latest - don't verify existence
 				continue
 			}
 			i := i
-- 
2.35.3

