From 992fb524e9d595582636ca8290b1401f97abd2ee Mon Sep 17 00:00:00 2001
From: Xiaopeng Han <hanxiaop8@outlook.com>
Date: Mon, 28 Feb 2022 12:24:35 +0800
Subject: fix bookinfo ingress (#37576)

---
 .../platform/kube/bookinfo-ingress.yaml       | 41 +++++++++++++------
 1 file changed, 28 insertions(+), 13 deletions(-)

diff --git a/samples/bookinfo/platform/kube/bookinfo-ingress.yaml b/samples/bookinfo/platform/kube/bookinfo-ingress.yaml
index 0a2bb9da93..e2143399fc 100644
--- a/samples/bookinfo/platform/kube/bookinfo-ingress.yaml
+++ b/samples/bookinfo/platform/kube/bookinfo-ingress.yaml
@@ -15,7 +15,7 @@
 ###########################################################################
 # Ingress resource (gateway)
 ##########################################################################
-apiVersion: networking.k8s.io/v1beta1
+apiVersion: networking.k8s.io/v1
 kind: Ingress
 metadata:
   name: gateway
@@ -26,23 +26,38 @@ spec:
   - http:
       paths:
       - path: /productpage
+        pathType: Exact
         backend:
-          serviceName: productpage
-          servicePort: 9080
-      - path: /static/*
+          service:
+            name: productpage
+            port:
+              number: 9080
+      - path: /static/
+        pathType: Prefix
         backend:
-          serviceName: productpage
-          servicePort: 9080
+          service:
+            name: productpage
+            port:
+              number: 9080
       - path: /login
+        pathType: Exact
         backend:
-          serviceName: productpage
-          servicePort: 9080
+          service:
+            name: productpage
+            port:
+              number: 9080
       - path: /logout
+        pathType: Exact
         backend:
-          serviceName: productpage
-          servicePort: 9080
-      - path: /api/v1/products.*
+          service:
+            name: productpage
+            port:
+              number: 9080
+      - path: /api/v1/products
+        pathType: Prefix
         backend:
-          serviceName: productpage
-          servicePort: 9080
+          service:
+            name: productpage
+            port:
+              number: 9080
 ---
-- 
2.35.3

