From a133dcf32e3403abae2f1cf776c45ac2c2534a3b Mon Sep 17 00:00:00 2001
From: Alan Wang <gchinaran@gmail.com>
Date: Sun, 24 Apr 2022 01:44:45 +0800
Subject: fix: proxy config unmarshal mesh config failed when meshId is number
 (#38523)

---
 .../istio-control/istio-discovery/templates/configmap.yaml      | 2 +-
 manifests/charts/istiod-remote/templates/configmap.yaml         | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/manifests/charts/istio-control/istio-discovery/templates/configmap.yaml b/manifests/charts/istio-control/istio-discovery/templates/configmap.yaml
index 8e57c81862..8c42b97384 100644
--- a/manifests/charts/istio-control/istio-discovery/templates/configmap.yaml
+++ b/manifests/charts/istio-control/istio-discovery/templates/configmap.yaml
@@ -11,7 +11,7 @@
 
     defaultConfig:
       {{- if .Values.global.meshID }}
-      meshId: {{ .Values.global.meshID }}
+      meshId: "{{ .Values.global.meshID }}"
       {{- end }}
       tracing:
       {{- if eq .Values.global.proxy.tracer "lightstep" }}
diff --git a/manifests/charts/istiod-remote/templates/configmap.yaml b/manifests/charts/istiod-remote/templates/configmap.yaml
index 8e57c81862..8c42b97384 100644
--- a/manifests/charts/istiod-remote/templates/configmap.yaml
+++ b/manifests/charts/istiod-remote/templates/configmap.yaml
@@ -11,7 +11,7 @@
 
     defaultConfig:
       {{- if .Values.global.meshID }}
-      meshId: {{ .Values.global.meshID }}
+      meshId: "{{ .Values.global.meshID }}"
       {{- end }}
       tracing:
       {{- if eq .Values.global.proxy.tracer "lightstep" }}
-- 
2.35.3

