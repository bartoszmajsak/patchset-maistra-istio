From a498dc2fbb27a221349d59d29856bf2856322bfc Mon Sep 17 00:00:00 2001
From: John Howard <howardjohn@google.com>
Date: Wed, 3 Nov 2021 11:09:16 -0700
Subject: Use targetPort for gateway tests (#35873)

This allows running as non-root
---
 tests/integration/pilot/gw_topology_test.go | 1 +
 tests/integration/pilot/ingress_test.go     | 1 +
 2 files changed, 2 insertions(+)

diff --git a/tests/integration/pilot/gw_topology_test.go b/tests/integration/pilot/gw_topology_test.go
index 8bdd282ba1..d9866a1b98 100644
--- a/tests/integration/pilot/gw_topology_test.go
+++ b/tests/integration/pilot/gw_topology_test.go
@@ -59,6 +59,7 @@ func TestXFFGateway(t *testing.T) {
 spec:
   ports:
   - port: 80
+    targetPort: 8080
     name: http
   selector:
     istio: ingressgateway
diff --git a/tests/integration/pilot/ingress_test.go b/tests/integration/pilot/ingress_test.go
index 25b7b28e4d..4e24babf17 100644
--- a/tests/integration/pilot/ingress_test.go
+++ b/tests/integration/pilot/ingress_test.go
@@ -711,6 +711,7 @@ func TestCustomGateway(t *testing.T) {
 spec:
   ports:
   - port: 80
+    targetPort: 8080
     name: http
   selector:
     istio: custom
-- 
2.35.3

