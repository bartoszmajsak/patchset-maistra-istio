From 8c7fa002822fdb313834e5271bbb9897a1862b5d Mon Sep 17 00:00:00 2001
From: Pengyuan Bian <bianpengyuan@google.com>
Date: Wed, 30 Mar 2022 18:25:07 -0700
Subject: Remove meaningless CA authentication check. (#38188)

---
 pkg/istio-agent/agent_test.go | 5 -----
 1 file changed, 5 deletions(-)

diff --git a/pkg/istio-agent/agent_test.go b/pkg/istio-agent/agent_test.go
index 27436787e5..acb87b7303 100644
--- a/pkg/istio-agent/agent_test.go
+++ b/pkg/istio-agent/agent_test.go
@@ -278,11 +278,6 @@ func TestAgent(t *testing.T) {
 				return a
 			})
 			a.Check(t, security.WorkloadKeyCertResourceName, security.RootCertReqResourceName)
-
-			// Switch out our auth to only allow mTLS. In practice, the real server would allow JWT, but we
-			// don't have a good way to expire JWTs here. Instead, we just deny all JWTs to ensure mTLS is used
-			a.CaAuthenticator.Set("", filepath.Join(dir, "cert-chain.pem"))
-			a.Check(t, security.WorkloadKeyCertResourceName, security.RootCertReqResourceName)
 		})
 		t.Run("reboot", func(t *testing.T) {
 			// Switch the JWT to a bogus path, to simulate the VM being rebooted
-- 
2.35.3

