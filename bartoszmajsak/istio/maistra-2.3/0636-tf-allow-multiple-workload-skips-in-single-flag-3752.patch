From d52117721a47a6607c398b32c93bfb02b2648522 Mon Sep 17 00:00:00 2001
From: John Howard <howardjohn@google.com>
Date: Thu, 24 Feb 2022 13:24:47 -0800
Subject: tf: allow multiple workload skips in single flag (#37526)

---
 pkg/test/framework/resource/flags.go | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/pkg/test/framework/resource/flags.go b/pkg/test/framework/resource/flags.go
index c3c459eb29..2b5af50a7f 100644
--- a/pkg/test/framework/resource/flags.go
+++ b/pkg/test/framework/resource/flags.go
@@ -18,6 +18,7 @@
 	"flag"
 	"fmt"
 	"os"
+	"strings"
 
 	"istio.io/istio/pkg/test/framework/components/echo/echotypes"
 	"istio.io/istio/pkg/test/framework/config"
@@ -47,7 +48,9 @@ func SettingsFromCommandLine(testID string) (*Settings, error) {
 		return nil, err
 	}
 
-	s.SkipWorkloadClasses.Insert(s.skipWorkloadClasses...)
+	for _, wl := range s.skipWorkloadClasses {
+		s.SkipWorkloadClasses.Insert(strings.Split(wl, ",")...)
+	}
 	if s.SkipVM {
 		s.SkipWorkloadClasses.Insert(echotypes.VM)
 	}
-- 
2.35.3

